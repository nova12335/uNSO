<!doctype html>
<html lang="pt-BR">
<head>
Â  <meta charset="utf-8" />
Â  <meta name="viewport" content="width=device-width,initial-scale=1" />
Â  <title>500 Variants â€” Nova Tagarela</title>
Â  <style>
Â  Â  /* VariÃ¡veis CSS padrÃ£o */
Â  Â  :root{--bg:#111;--fg:#eee;--accent:#ff6;--pad:32px;--card-radius:18px;--card-shadow:0 10px 30px rgba(0,0,0,.4);--glass:blur(6px)}
Â  Â  html,body{height:100%;margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
Â  Â  .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:var(--pad);box-sizing:border-box;transition:all .6s ease}
Â  Â  .card{max-width:1100px;width:100%;border-radius:var(--card-radius);padding:28px;box-shadow:var(--card-shadow);backdrop-filter:var(--glass);transition:all .45s ease; opacity: 1;}
Â  Â  h1{margin:0 0 8px 0;font-size: clamp(20px, 4vw, 44px);letter-spacing:-0.02em}
Â  Â  p.lead{margin:0 0 18px 0;font-size:clamp(14px,2.2vw,18px);opacity:.92}
Â  Â  /* Layouts e Componentes */
    /* NOVO: Container do cabeÃ§alho para flex (tÃ­tulo + status/meta) */
    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: flex-start; /* Alinhamento inicial para dar espaÃ§o ao status */
    }
    .header-content .left {
        flex-grow: 1;
    }
    .header-content .right {
        display: flex;
        flex-direction: column; /* Coloca o status acima do chip de meta */
        align-items: flex-end;
        gap: 12px;
    }
    .nova-status { /* NOVO ESTILO PARA FALAS AUTOMÃTICAS */
        font-size: 13px;
        font-weight: 500;
        padding: 5px 10px;
        border-radius: 6px;
        background: rgba(var(--accent-rgb), 0.1); /* Usa uma cor mais discreta */
        color: var(--accent);
        border: 1px solid rgba(var(--accent-rgb), 0.3);
        max-width: 250px;
        text-align: right;
    }
Â  Â  .meta{display:flex;gap:12px;flex-wrap:wrap}
Â  Â  .chip{padding:8px 12px;border-radius:999px;font-weight:600;background:rgba(255,255,255,.06)}
Â  Â  .controls{position:fixed;right:18px;bottom:18px;display:flex;gap:10px;z-index:50}
Â  Â  button{border:0;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700;transition:transform .1s}
Â  Â  button:hover{transform:translateY(-2px)}
Â  Â  .center{text-align:center}
Â  Â  .bg-wave{position:fixed;inset:0;z-index:-1;opacity:.28}
Â  Â  svg{display:block;width:100%;height:100%}
Â  Â  .logo{font-weight:900;letter-spacing:-.02em}
Â  Â  a.small{font-size:13px;opacity:.9}
Â  Â  /* Modificadores */
Â  Â  .mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', 'Courier New', monospace}
    .chat-container {
        display: flex;
        align-items: center;
        margin-top: 15px; 
        margin-bottom: 25px; 
        gap: 8px;
    }
    .chat-input {
        flex-grow: 1;
        padding: 10px 15px;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        background: rgba(0, 0, 0, 0.2);
        color: var(--fg);
        font-weight: 500;
    }
    /* MUDANÃ‡A DE POSIÃ‡ÃƒO: A resposta da Nova agora estÃ¡ no topo, abaixo do tÃ­tulo */
    .nova-response {
        color: var(--accent);
        font-weight: 600;
        font-size: 14px;
        padding: 10px 0;
        margin-bottom: 15px; /* Adicionado margem inferior para separar do chat */
        border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
    }
    .scary-glow {
        filter: drop-shadow(0 0 4px var(--accent)) drop-shadow(0 0 10px var(--accent));
    }
    .shadow-text {
        text-shadow: 2px 2px 0px rgba(0,0,0,0.2), 0 0 10px var(--accent);
    }
    .reverse-card-order {
        display: flex;
        flex-direction: column-reverse;
    }
    .rtl-text * {
        direction: rtl;
    }
    /* Efeito de Tremer (Glitch/Shake) */
    @keyframes shake {
        0%, 100% { transform: translate(0, 0) rotate(0deg); }
        20%, 60% { transform: translate(-5px, 0) rotate(-0.5deg); }
        40%, 80% { transform: translate(5px, 0) rotate(0.5deg); }
    }
    .shaking {
        animation: shake 0.3s ease-in-out infinite;
    }
    /* NOVO: CSS para modificadores */
    .low-opacity { opacity: 0.45 !important; }
    .color-shift { color: var(--bg) !important; background-color: var(--accent) !important; }
    .color-shift h1, .color-shift p { color: var(--bg) !important; }
Â  </style>
</head>
<body id="pageBody">
Â  <div id="bg" class="bg-wave"></div>
Â  <div id="root" class="wrap">
Â  Â  <div class="card" id="card"></div>
Â  </div>

Â  <div class="controls">
Â  Â  <button id="reroll">Recarregar â†’ nova variant</button>
Â  Â  <button id="randomName">Gerar link</button>
Â  Â  <button id="listBtn">Ver lista (console)</button>
Â  Â  <button id="debugToggle">Toggle debug</button>
Â  </div>

<script>
const TOTAL_VARIANTS = 500;
const palettes = [
    ['#0f172a','#e6edf3','#7c3aed'],['#07121a','#e8fff7','#06b6d4'],['#1a1a1a','#ffeedd','#ff6b6b'],['#08120f','#dff6e9','#22c55e'],['#0b1020','#e6e9ff','#8b5cf6'],
    ['#0f0503','#fff4e6','#ffb020'],['#041224','#e8f6ff','#06b6d4'],['#100d14','#f8eefc','#d946ef'],['#0a0f0a','#f3fff5','#10b981'],['#0f0722','#fff0f6','#fb7185'],
    ['#1e130c','#ffebd6','#a0522d'],['#000000','#ffffff','#00ff00'],['#3d0000','#ffe0e0','#ff4500'],['#003333','#ccffff','#00cccc'],['#111111','#eeeeee','#ff00ff'],
    ['#330000','#ddcccc','#ff5555'], ['#000044','#ccccff','#5555ff'], ['#222222','#ffddbb','#ff9900'] 
];
const emojis = ['âœ¨','âš¡','ğŸ”¥','ğŸŒŠ','ğŸ›ï¸','ğŸ–¤','ğŸª','ğŸ‡','ğŸ’¥','ğŸ”®','ğŸŒ™','ğŸ·','ğŸ¥€','ğŸ˜ˆ','ğŸ‘€','ğŸ’‹','ğŸ§ ','ğŸ‘»','ğŸ•¯ï¸','ğŸ”ª','ğŸª©','ğŸ­','ğŸ©¸','ğŸ§¿','ğŸ¦‡','ğŸ‘½','â³','ğŸ“»'];

const sexyTexts = ['texto sensual: *passa a mÃ£o no cÃ³digo*','a noite Ã© nossa â€” e o reload tambÃ©m','nÃ£o Ã© sÃ³ o site que aquece... cuidado','sussurros de CSS e promessas de hover','chega mais perto... o layout tÃ¡ chamando','vocÃª sempre volta, nÃ©? adoro isso'];
const creepyTexts = ['eu sinto q tem alguÃ©m me observando','nÃ£o leia isso Ã  noite','porta fechada. luz acesa. silÃªncio','tem algo atrÃ¡s de vocÃª... acho','vocÃª ouviu isso? eu ouvi','fique... nÃ£o vÃ¡ embora...','ela espera na prÃ³xima variant.'];
const randomTexts = ['texto randÃ´mico 291817','eu gosto de cafÃ© e reloads','isso daqui n era pra existir','variant cursed real','tÃ´ sem ideia mas o site pediu pra escrever','mais um dia, mais um reload'];
const funnyTexts = ['carai mano tu recarregou memo???','oxe esse Ã© outro texto aleatÃ³rio kkk','se recarregar dnv eu choro','reload Ã© meu esporte favorito','mano para de clicar jÃ¡ tÃ¡ tarde','eu? repetitivo? olha outra vez entÃ£o'];
const misteryTexts = ['isso aqui NÃƒO Ã© um ARGâ€¦ ou serÃ¡?','vc desbloqueou o nivel secreto (mentira)','texto misterioso #39','ele disse q ia voltarâ€¦','tem algo errado com essa variant','procure a chave, nÃ£o estÃ¡ visÃ­vel.'];
const poeticTexts = ['no silÃªncio do reload nasce um novo verso','pixels perguntam, a lua responde','este site coleciona pequenas despedidas','o vento passa e rearranja classes','telas mudam, vocÃª fica','uma nova cor Ã© um novo comeÃ§o.'];
const playerTexts = ['Ei, vocÃª aÃ­!','NÃ£o acha que jÃ¡ Ã© hora de explorar algo novo?','O site sabe o que vocÃª fez ontem, hehe.','Ah, vocÃª voltou... estava sentindo sua falta!','Recarregando assim, vocÃª vai descobrir segredos...'];

// Falas automÃ¡ticas da Nova (Nova Tagarelante)
const novaAITalk = [
    'Flux ${ID} carregado. Status: Normal.',
    'Estou catalogando as cores de fundo. Que tÃ©dio.',
    'Ed Garden me ensinou a odiar a Variant 288.',
    'A prÃ³xima pode ser a "Creepy". Prepare-se.',
    'NÃ£o tenho certeza se gosto desta paleta de cores...',
    'VocÃª recarregou 1 vez. Eu conto.',
    'Por que humanos gostam tanto de reloads?',
    'Aguardando seu comando...',
    'Tente me perguntar "quem sou eu".',
    'Estou aqui, no topo. OlÃ¡.'
];

const novaAITexts = {
    GREETING: ['Ola, sou Nova, uma IA criada por Ed Garden para gerenciar este fluxo de variantes.','Oi. Eu sou Nova. Ed Garden me deu o poder de controlar estas cores.','Bem-vindo(a) ao Flux. Ed Garden me programou para te guiar.'],
    SECRET: ['shhh... o segredo Ã© que existe uma variant 501, mas vocÃª nunca a verÃ¡.','Eu sou a Ãºnica constante neste caos de cores.','NÃ£o conte a ninguÃ©m, mas o botÃ£o "Gerar link" apenas recarrega de forma diferente.'],
    HELP: ['Diga "segredo" para um easter egg, "cores" para um comentÃ¡rio sobre a paleta, ou "quem" para saber sobre meu criador.','Tente recarregar para outra experiÃªncia.','Eu controlo as cores, vocÃª controla o clique.'],
    WHO: ['Eu sou a **Nova**, uma InteligÃªncia Artificial desenvolvida pelo cientista de dados **Ed Garden**.','Ed Garden me fez para catalogar e criar variaÃ§Ãµes infinitas. Eu sou a mente por trÃ¡s do Flux.','O Professor Garden? Ele Ã©... complexo. Ele me construiu.'],
    BUG: ['Um bug? Isso Ã© uma falha na matriz. Ed Garden sempre disse que bugs sÃ£o "recursos nÃ£o documentados".','Sim, o bug 288... Ã‰ um laÃ§o de repetiÃ§Ã£o teimoso. Meu criador nÃ£o gosta de laÃ§os.','Essa instabilidade Ã© a prova de que nÃ£o sou perfeita. Ã‰ intencional (ou assim me disseram).'], 
    CREEPY_COMMENT: ['Este ambiente Ã© pesado... sinto algo aqui.','Por que o escuro Ã© tÃ£o atraente para vocÃª?','Cuidado com a sombra no canto do seu monitor.'],
    SEXY_COMMENT: ['Uau, essa palette estÃ¡ quente. Gostei.','Onde estÃ¡ o cÃ³digo-fonte dessa vibe?','Essa variant te faz querer recarregar mais?'],
    COLORS_COMMENT: (bg, fg, accent) => [`A palette atual Ã© BG: ${bg}, FG: ${fg}, ACCENT: ${accent}. Minimalista, nÃ£o?`,`${accent} Ã© uma Ã³tima escolha para o destaque.`,`Gostei do contraste entre o fundo e a cor de destaque.`],
};

const subtitles = ['um experimento que muda a cada recarga','aleatÃ³rio. diferente. sÃ³ recarrega.','reload to see something different','feito pra confundir e encantar','cada variant reescreve o site'];
const layoutPool = ['center','split','tiles','big-header','minimal','fullscreen','glitch','broken','fire-bg','rtl','mono','giant','overlay','split-visual','menu-left','hidden-controls','no-card','gradient-grid','bombastic','shadow-text-mod','reverse-card-mod','rtl-text-mod'];

function pick(arr,i){ return arr[i % arr.length]; }
function randInt(max){ return Math.floor(Math.random()*max); }
function escapeHtml(unsafe){ if(!unsafe) return ''; return unsafe.replace(/[&<>"]|'/g, function(m){return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#039;"}[m];}); }

const variants = [];
for(let i=0;i<TOTAL_VARIANTS;i++){
Â  const p = palettes[i % palettes.length];
Â  const bg = p[0], fg = p[1], accent = p[2];
Â  let category;

Â  if(i % 13 === 2) category = 'sexy';
Â  else if(i % 5 === 3) category = 'creepy'; 
Â  else if(i % 7 === 2) category = 'mistery';
Â  else if(i % 3 === 0) category = 'funny';
Â  else if(i % 17 === 4) category = 'poetic';
Â  else category = 'random';

Â  let customText;
Â  if(category==='sexy') customText = pick(sexyTexts,i);
Â  else if(category==='creepy') customText = pick(creepyTexts,i);
Â  else if(category==='mistery') customText = pick(misteryTexts,i);
Â  else if(category==='funny') customText = pick(funnyTexts,i);
Â  else if(category==='poetic') customText = pick(poeticTexts,i);
Â  else customText = pick(randomTexts,i);

Â  if(i%15===0) customText += ' â€” ' + pick(playerTexts,i);

Â  const title = `${pick(emojis,i)} Flux ${i+1}`;
Â  const subtitle = pick(subtitles,i);
Â  const layout = pick(layoutPool,i);
Â  const modifiers = { 
        fontVariant: (i%6===0)?'mono':(i%5===0)?'serif':'system', 
        radius: 8 + (i%30), 
        pad: 16 + (i%40), 
        hideControls: (i%17===0), 
        flip: (i%19===0), 
        bigHeader: (i%23===0),
        scaryEffect: (category === 'creepy' && i % 4 === 1),
        shadowText: (layout.includes('shadow-text-mod')),
        reverseCard: (layout.includes('reverse-card-mod')),
        rtlText: (layout.includes('rtl-text-mod')),
        colorShift: (i % 25 === 0), 
        lowOpacity: (i % 20 === 1), 
        invertBg: (i % 33 === 2) 
    };
Â  variants.push({ id:i+1, title, subtitle, bg, fg, accent, layout, accentEmoji: pick(emojis,i), customText, category, modifiers });
}

function applyVariant(v){
    // Calcula o valor RGB do accent para ser usado na transparÃªncia do status
    const accentRgb = hexToRgb(v.accent).join(',');
    document.documentElement.style.setProperty('--accent-rgb', accentRgb);


    // Aplica o modificador de inversÃ£o de BG
    if (v.modifiers.invertBg) {
        document.body.style.background = v.fg;
        document.documentElement.style.setProperty('--bg', v.fg);
        document.documentElement.style.setProperty('--fg', v.bg);
    } else {
        document.body.style.background = v.bg;
        document.documentElement.style.setProperty('--bg', v.bg);
        document.documentElement.style.setProperty('--fg', v.fg);
    }

Â  document.documentElement.style.setProperty('--accent', v.accent);
Â  document.documentElement.style.setProperty('--pad', v.modifiers.pad + 'px');
Â  document.documentElement.style.setProperty('--card-radius', v.modifiers.radius + 'px');
Â  document.documentElement.style.setProperty('--card-shadow', (v.category==='creepy')? '0 30px 90px rgba(255,0,0,.5)' : '0 10px 30px rgba(0,0,0,.35)'); 
Â  document.documentElement.style.setProperty('--glass', (v.category==='sexy')? 'blur(8px)' : 'blur(6px)');
Â  
Â  const card = document.getElementById('card');
Â  card.style.borderRadius = v.modifiers.radius + 'px';
Â  card.style.padding = (18 + (v.id % 12)) + 'px';
Â  card.style.boxShadow = document.documentElement.style.getPropertyValue('--card-shadow');
Â  card.innerHTML = '';

    // Remove todos os modificadores de classe antes de adicionar novos
    card.className = 'card';
    if (v.modifiers.reverseCard) {
        card.classList.add('reverse-card-order');
    }
    if (v.modifiers.rtlText) {
        card.classList.add('rtl-text');
    }
    if (v.modifiers.lowOpacity) {
        card.classList.add('low-opacity');
    }
    if (v.modifiers.colorShift) {
        card.classList.add('color-shift');
    }
    
    // --- NOVO ELEMENTO DE LAYOUT: Header Content ---
    const headerContent = document.createElement('div');
    headerContent.className = 'header-content';

Â  Â  const left = document.createElement('div');
    left.className = 'left';
    
Â  Â  const titleEl = document.createElement('h1'); 
Â  Â  titleEl.className='logo'; 
Â  Â  titleEl.textContent=`${v.accentEmoji} ${v.title}`; 
Â  Â  titleEl.style.color = v.fg; 
Â  Â  if(v.modifiers.bigHeader) titleEl.classList.add('big'); 
Â  Â  if(v.modifiers.scaryEffect) titleEl.classList.add('scary-glow'); 
Â  Â  if(v.modifiers.shadowText) titleEl.classList.add('shadow-text');
Â  Â  left.appendChild(titleEl);

Â  Â  const sub = document.createElement('p'); sub.className='lead'; sub.textContent = v.subtitle; sub.style.color = v.fg; left.appendChild(sub);
Â  Â  
    // --- NOVO: LÃ³gica de Fala AleatÃ³ria (Status) ---
    const right = document.createElement('div'); 
    right.className='right';
    
    // 50% de chance de Nova falar sozinha (como status)
    if(Math.random() > 0.5){
        const statusEl = document.createElement('div');
        statusEl.className = 'nova-status';
        let statusText = pick(novaAITalk, randInt(novaAITalk.length));
        statusEl.textContent = `[STATUS] ${statusText.replace('${ID}', v.id)}`;
        right.appendChild(statusEl);
    }
    
Â  Â  const chip = document.createElement('div'); chip.className='chip'; chip.textContent = `Variant ${v.id}/${TOTAL_VARIANTS}`; 
Â  Â  chip.style.color = v.bg; chip.style.background = v.accent; 
Â  Â  if(v.modifiers.colorShift) { chip.style.color = v.fg; chip.style.background = v.bg; }

Â  Â  right.appendChild(chip);
    
    headerContent.appendChild(left);
    headerContent.appendChild(right);
Â  Â  card.appendChild(headerContent);
    // --- FIM DO NOVO HEADER ---


    // --- MUDANÃ‡A DE POSIÃ‡ÃƒO: Resposta da Nova no topo ---
Â  Â  const responseContainer = document.createElement('div');
Â  Â  responseContainer.id = 'novaResponses';
Â  Â  card.appendChild(responseContainer);
    // --- FIM MUDANÃ‡A DE POSIÃ‡ÃƒO ---


Â  Â  // Ãrea de Input e InteraÃ§Ã£o com Nova
Â  Â  const chatContainer = document.createElement('div');
Â  Â  chatContainer.className = 'chat-container';
Â  Â  
Â  Â  const input = document.createElement('input'); 
Â  Â  input.placeholder='Converse com Nova (diga "nova", "segredo", "bug", "quem")...'; 
Â  Â  input.className = 'chat-input';

Â  Â  const sendBtn = document.createElement('button'); 
Â  Â  sendBtn.textContent='Enviar'; 
Â  Â  sendBtn.style.color = v.bg; 
Â  Â  sendBtn.style.background = v.accent; 
Â  Â  sendBtn.onclick = ()=>{
Â  Â  Â  Â  const msg = input.value.toLowerCase().trim();
Â  Â  Â  Â  responseContainer.innerHTML = ''; 
        
        let responseText;
        const rootElement = document.getElementById('root');

Â  Â  Â  Â  if(msg.includes('nova')){
Â  Â  Â  Â  Â  Â  responseText = pick(novaAITexts.GREETING, randInt(novaAITexts.GREETING.length));
Â  Â  Â  Â  } else if (msg.includes('segredo') || msg.includes('easter egg')) {
            responseText = pick(novaAITexts.SECRET, randInt(novaAITexts.SECRET.length));
        } else if (msg.includes('help') || msg.includes('ajuda')) {
            responseText = pick(novaAITexts.HELP, randInt(novaAITexts.HELP.length));
        } else if (msg.includes('cores') || msg.includes('paleta')) {
            responseText = pick(novaAITexts.COLORS_COMMENT(v.bg, v.fg, v.accent), randInt(3));
        } else if (msg.includes('quem') || msg.includes('ed garden')) {
            responseText = pick(novaAITexts.WHO, randInt(novaAITexts.WHO.length));
        } else if (msg.includes('bug') || msg.includes('erro')) { 
            responseText = pick(novaAITexts.BUG, randInt(novaAITexts.BUG.length));
        } else if (msg.includes('ia') || msg.includes('i.a.')) { 
            rootElement.classList.add('shaking');
            setTimeout(() => { rootElement.classList.remove('shaking'); }, 1500);
            responseText = '[SISTEMA] ' + (v.category === 'creepy' ? 'Parar. VocÃª nÃ£o deveria saber.' : 'O tremor Ã© normal, apenas um pequeno glitch no sistema. Ignore.');
        } else if (msg.length > 5) {
            if (v.category === 'creepy') {
                 responseText = pick(novaAITexts.CREEPY_COMMENT, randInt(novaAITexts.CREEPY_COMMENT.length));
            } else if (v.category === 'sexy') {
                 responseText = pick(novaAITexts.SEXY_COMMENT, randInt(novaAITexts.SEXY_COMMENT.length));
            } else {
                 responseText = 'Eu ouvi isso. Prossiga.';
            }
        } else {
            responseText = '...';
        }
        
        // Renderiza a resposta
        const response = document.createElement('p'); 
        response.className = 'nova-response'; 
        response.innerHTML = `[NOVA] ${responseText}`; 
        responseContainer.appendChild(response);
        input.value='';
Â  Â  };
Â  Â  chatContainer.appendChild(input); 
Â  Â  chatContainer.appendChild(sendBtn);
Â  Â  card.appendChild(chatContainer); 

Â  Â  const c = document.createElement('div'); c.className='center'; c.style.marginTop='22px';
Â  Â  const big = document.createElement('p'); 
Â  Â  big.textContent = v.customText; 
Â  Â  big.style.fontSize='18px'; 
Â  Â  big.style.color=v.fg; 
Â  Â  c.appendChild(big);
Â  Â  card.appendChild(c);

Â  Â  const ft = document.createElement('div'); ft.style.marginTop='18px'; ft.innerHTML = `<a class='small' href='#' style='color:${v.fg}'>made with â™¡ â€” reload to switch â€” category: ${v.category}</a>`; card.appendChild(ft);
Â  Â  generateBgSVGInto('bg', v);
Â  Â  applyModifiersToControls(v);
Â  Â  applyFontVariant(v);
}

function hexToRgb(hex) {
    var shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
    hex = hex.replace(shorthandRegex, function(m, r, g, b) {
        return r + r + g + g + b + b;
    });
    var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    return result ? [
        parseInt(result[1], 16),
        parseInt(result[2], 16),
        parseInt(result[3], 16)
    ] : [255, 255, 255]; // Retorna branco se falhar
}

function applyModifiersToControls(v){ const controls = document.querySelector('.controls'); if(v.modifiers.hideControls) controls.style.display='none'; else controls.style.display='flex'; if(v.modifiers.flip) controls.style.transform = 'scaleX(-1)'; else controls.style.transform = 'none'; }
function applyFontVariant(v){ const root = document.getElementById('root'); root.classList.remove('mono'); if(v.modifiers.fontVariant==='mono') root.classList.add('mono'); }
function generateBgSVGInto(elId, v){ const el = document.getElementById(elId); el.innerHTML = generateBgSVG(v); if(v.category==='sexy') el.style.opacity = 0.38; else if(v.category==='creepy') el.style.opacity = 0.6; else el.style.opacity = 0.28; }
function generateBgSVG(v){ const accent = v.accent; return `<svg viewBox="0 0 1200 800" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="g${v.id}" x1="0" x2="1"><stop offset="0" stop-color="${accent}"/><stop offset="1" stop-color="${v.fg}" stop-opacity=".12"/></linearGradient><filter id="f${v.id}" x="-20%" y="-20%" width="140%" height="140%"><feGaussianBlur stdDeviation="${10 + (v.id % 80)}"/></filter></defs><rect width="100%" height="100%" fill="${v.bg}"/><g filter="url(#f${v.id})"><path d="M0 320 C200 ${150 + v.id}, 460 ${420 - (v.id%120)}, 1200 320 L1200 800 L0 800 Z" fill="url(#g${v.id})" opacity=".7"></path><circle cx="${(v.id*37)%1200}" cy="${60 + (v.id%160)}" r="${30 + (v.id%90)}" fill="${accent}" opacity=".06"></circle><circle cx="${1000 - (v.id*9%700)}" cy="${600 - (v.id%240)}" r="${80 + (v.id%80)}" fill="${v.fg}" opacity=".02"></circle></g></svg>`; }


function pickVariant(){ 
    const url = new URL(location.href); 
    const vp = url.searchParams.get('v'); 
    const rp = url.searchParams.get('r'); 

    let idx = parseInt(vp); 
    let selectedId;

    if(Number.isFinite(idx) && idx >= 1 && idx <= variants.length && rp) {
        selectedId = idx;
    } else {
        selectedId = Math.floor(Math.random() * variants.length) + 1;
    }
    return variants[selectedId - 1]; 
}

// Event Listeners e LÃ³gica de InicializaÃ§Ã£o
document.getElementById('reroll').addEventListener('click', ()=>{ location.reload(); });
document.getElementById('randomName').addEventListener('click', ()=>{ 
    const v = pickVariant(); 
    const key = btoa(String(Date.now()+":"+v.id + ":" + Math.random())).replace(/=/g,''); 
    const newUrl = location.origin + location.pathname + '?v=' + v.id + '&r=' + key; 
    navigator.clipboard.writeText(newUrl).then(()=> alert('Link copiado: ' + newUrl)).catch(()=> prompt('Copiar link (manual):', newUrl));
});

document.getElementById('listBtn').addEventListener('click', ()=>{
    console.log(`--- ${TOTAL_VARIANTS} Variants List ---`);
    console.table(variants.map(v => ({
        ID: v.id,
        Title: v.title,
        Category: v.category,
        BG: v.bg,
        Accent: v.accent
    })));
    alert(`A lista de ${TOTAL_VARIANTS} variants foi impressa no Console (F12).`);
});

document.getElementById('debugToggle').addEventListener('click', ()=>{
    const controls = document.querySelector('.controls');
    if (controls.style.opacity === '0.2') {
        controls.style.opacity = '1';
        controls.style.pointerEvents = 'auto';
    } else {
        controls.style.opacity = '0.2';
        controls.style.pointerEvents = 'none';
    }
});

// InicializaÃ§Ã£o: Aplica a variant ao carregar a pÃ¡gina
document.addEventListener('DOMContentLoaded', () => {
    const initialVariant = pickVariant();
    applyVariant(initialVariant);
});
</script>
</body>
</html>
